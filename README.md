# Summary
Allows you to restrict weapon based on a percentage quota and a hard cap.

# Config
You can customize the `MessagePrefix`, `RestrictMessage` and `DisabledMessage`. To not use the `DisabledMessage` leave it as an empty string ("").

For `RestrictMessage` use `{0}` for the weapon name and `{1}` for the limit.

For `DisabledMessage` use `{0}` for the weapon name. 

You have to use the escaped character codes for colors to get colored messages. See the example config for an example and [this list](https://github.com/roflmuffin/CounterStrikeSharp/blob/e1f9b5635eb21a7e2e31b1783b1b676719f88593/managed/CounterStrikeSharp.API/Modules/Utils/ChatColors.cs#L19) for character codes.

To completely disable a weapon, set the `WeaponQuotas` or `WeaponLimits` for the desired weapon to 0.

`WeaponQuotas` is a decimal number used for a percentage of players (0.2 = 20%, for every 5th person a new weapon is allowed), either on the total players or for the team (depending on `DoTeamCheck`).

`WeaponLimits` is a hard cap per weapon (1 = 1 AWP total/per team, also caps out the `WeaponQuotas` value).

You can use one, both, or none of `WeaponQuotas` and `WeaponLimits`.

You can use the `VIPFlag` to enable VIP bypass for a permission group, or use an empty string ("") to disable the check.

The example config will allow 20% of the players on either team to have an AWP, with a hard limit of 1 per team. Meaning if you have at least 5 players on a team, they get one AWP. 
VIPs are completely ignored and can always buy, drop and pick up the AWP.

Example config generated by the plugin:
```json
{
  "MessagePrefix": "\u1010\u0010[WeaponRestrict] ",
  "RestrictMessage": "\u0003{0}\u0001 is currently restricted to \u000F{1}\u0001 per team.",
  "DisabledMessage": "\u0003{0}\u0001 is currently \u000Fdisabled\u0001.",
  "WeaponQuotas": {
    "weapon_awp": 0.2
  },
  "WeaponLimits": {
    "weapon_awp": 1
  },
  "DoTeamCheck": true,
  "VIPFlag": "@css/vip",
  "ConfigVersion": 1
}
```

# Signatures
You need to add the following signatures in `/game/csgo/addons/counterstrikesharp/gamedata/gamedata.json`
```js
"CCSPlayer_CanAcquire": {
    "signatures": {
      "library": "server",
      "windows": "\\x48\\x8B\\xC4\\x44\\x89\\x40\\x18\\x48\\x89\\x48\\x08\\x55\\x56",
      "linux": "\\x55\\x48\\x89\\xE5\\x41\\x57\\x41\\x56\\x48\\x8D\\x45\\xCC"
    }
  },
  "GetCSWeaponDataFromKey": {
    "signatures": {
      "library": "server",
      "windows": "\\x48\\x89\\x5C\\x24\\xCC\\x48\\x89\\x74\\x24\\xCC\\x57\\x48\\x83\\xEC\\x20\\x48\\x8B\\xFA\\x8B",
      "linux": "\\x55\\x48\\x89\\xE5\\x41\\x57\\x41\\x56\\x41\\x89\\xFE\\x41\\x55\\x41\\x54\\x45"
    }
  }
```
